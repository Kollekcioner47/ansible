---
- name: secret playbook
  hosts: client1
  become: yes

  vars: 
    admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30626437653462653632313932343638643530326138313562313163363532313932333965346637
          3137363530363838613736356563326131306531373738340a363636626465356539643334363030
          35653031643231333961653562656465656462336261623062326561363038663738616133663763
          3333366336313030320a336339343365313536313061353138663338653765346465633638623661
          6438
  
  tasks:
  - name: create config
    copy: 
      dest: "/home/engineer/myconfig.conf"
      content: |
        port = 5432
        log = 7days
        home = /home/engineer
        user = postgres
        password = {{admin_password}}